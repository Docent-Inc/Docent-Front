import{_ as u,r as C,o as $,f as p,k as l,l as h,m as _,t as k,A as y,q as d,J as x,K as I,L as v,z as f,F as w,U as S,M as V,H as F}from"./entry.41df9e10.js";import{u as g,a as N}from"./chat.6016322f.js";import"./axios.f72bf569.js";const G={class:"chat-voice"},L={__name:"ChatVoice",emits:["finish"],setup(a,{emit:e}){const n=C(""),c=window.SpeechRecognition||window.webkitSpeechRecognition,t=new c;t.lang="ko",t.continuous=!0,t.onresult=s=>{for(let o=s.resultIndex,i=s.results.length;o<i;o++){let m=s.results[o][0].transcript;s.results[o].isFinal&&(n.value+=m,console.log("🎤 ",m))}},$(()=>{t.start()});function r(){t&&t.stop(),e("finish",n.value)}return(s,o)=>{const i=p("v-icon");return l(),h("div",G,[_("div",null,k(y(n)),1),d(i,{class:"ic_voice big",onClick:r})])}}},P=u(L,[["__scopeId","data-v-e5e9f806"]]);const U={name:"ChatInput",data(){return{mode:"INPUT",data:"",isGenerating:!1}},setup(){},computed:{...x(g,["chatList"])},methods:{...I(g,["setChatList","getFirstPage","setReload"]),async send(){if(this.isGenerating)return;const{generateChat:a}=N(),e=this.chatList;e.push({content_type:7}),this.setChatList(e),this.isGenerating=!0;const n=await a(this.data);if(console.log("✨generateChat >>> ",this.data),!n.success){const c=`${n.status_code}  - ${n.message}`;console.log("Error! > ",c,n),alert(c)}this.data="",this.getFirstPage(),this.isGenerating=!1},setData(a){this.data=a,this.mode="INPUT"}}},b={class:"chat-input"},B={class:"input"},D=["disabled"];function E(a,e,n,c,t,r){const s=p("v-icon"),o=P;return l(),h(V,null,[_("div",b,[t.mode==="INPUT"?(l(),v(s,{key:0,class:"ic_voice",onClick:e[0]||(e[0]=i=>t.mode="VOICE")})):f("",!0),_("div",B,[w(_("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=i=>t.data=i),placeholder:"도슨트에게 당신의 이야기를 들려주세요",disabled:t.isGenerating},null,8,D),[[S,t.data]]),d(s,{class:"ic_send",onClick:r.send},null,8,["onClick"])])]),t.mode==="VOICE"?(l(),v(o,{key:0,onFinish:r.setData},null,8,["onFinish"])):f("",!0)],64)}const R=u(U,[["render",E],["__scopeId","data-v-fa0377c9"]]);const T={mounted(){}},M={class:"viewport"},A={class:"header"},O={class:"layout"};function q(a,e,n,c,t,r){const s=p("v-icon"),o=R;return l(),h("div",M,[_("div",A,[d(s,{class:"ic_home",onClick:e[0]||(e[0]=i=>this.$router.push("/home"))}),d(s,{class:"logo_docent"})]),_("div",O,[F(a.$slots,"default",{},void 0,!0)]),d(o)])}const K=u(T,[["render",q],["__scopeId","data-v-43c3a212"]]);export{K as default};
