import{_ as p,f as g,k as e,l as s,q as C,D as o,t as r,m as n,E as b,G as I,x as L,y as $,v as m,A as B,B as S,H as _,F as w,C as M}from"./entry.c61ee406.js";import{W as T}from"./v3-infinite-loading.es.786c4da3.js";import{u as v}from"./chat.04fdd157.js";import"./generate.9f8bb2b6.js";const D=""+new URL("loading-dot.093b62ac.gif",import.meta.url).href;const N=t=>(L("data-v-5f072096"),t=t(),$(),t),R={key:0,class:"chat-profile"},F=N(()=>n("div",null,"도슨트",-1)),q={key:1,class:"chat-date"},V={key:2,class:"chat-box loading"},Y=["src"],j={key:3,class:"chat-box"},E={__name:"ChatBox",props:{type:{type:String,required:!1,default:"text"},text:{type:String,required:!1,default:""}},setup(t){return(c,a)=>{const u=g("v-icon");return e(),s("div",{class:I(["chat-box-wrapper",{right:t.type==="text"}])},[t.type==="docent"?(e(),s("div",R,[C(u,{class:"ic_docent"}),F])):o("",!0),t.type==="date"?(e(),s("div",q,r(c.$dayjs(t.text).format("YYYY년 M월 D일")),1)):o("",!0),t.type==="loading"?(e(),s("div",V,[n("img",{src:b(D)},null,8,Y)])):o("",!0),t.type==="text"?(e(),s("div",j,r(t.text),1)):o("",!0)],2)}}},y=p(E,[["__scopeId","data-v-5f072096"]]);const H={name:"ChatResult",props:{type:{type:Number,required:!0,default:1},chat:{type:Object,required:!0,default:()=>{}}},computed:{type_name(){switch(this.type){case 1:return"🌞 아침 일기";case 2:return"🌙 저녁 일기";case 3:return"✏️ 메모";default:return"✅ 일정"}}},methods:{more(){switch(this.chat.content_type){case 1:case 2:const t=this.chat.content_type===1?this.chat.MorningDiary_id:this.chat.NightDiary_id;this.$router.push(`/diary/${t}?type=${this.chat.content_type}`);break;case 3:this.$router.push(`/memo/${this.chat.Memo_id}`);break;case 4:this.$router.push(`/calendar/?date=${this.chat.event_time}`);break;default:alert("🔔 서비스 오픈 예정입니다.");break}console.log("cliclk>>",this.chat)}}},P={class:"chat-result"},z={key:0,class:"chat-title"},A={key:1,class:"chat-title"},G={key:2,class:"memo"},O={class:"chat-diary-title"},U=["src"],W={key:3},J={class:"chat-memo"},K={key:4},Q={class:"chat-calendar"},X={class:"chat-calendar-title"},Z={class:"date"};function tt(t,c,a,u,k,l){return e(),s("div",P,[a.type===4?(e(),s("div",z,[n("span",null,r(l.type_name.replace(" ","  ")),1),m("이 추가 되었습니다! ")])):(e(),s("div",A,[n("span",null,r(l.type_name.replace(" ","  ")),1),m("가 추가 되었습니다! ")])),a.type===1||a.type===2?(e(),s("div",G,[n("div",O,r(a.chat.content),1),n("img",{src:a.chat.image_url},null,8,U),n("div",{class:"chat-more",onClick:c[0]||(c[0]=(...d)=>l.more&&l.more(...d))},"더 알아보기 >")])):o("",!0),a.type===3?(e(),s("div",W,[n("div",J,[m(r(a.chat.content)+" ",1),n("div",{class:"chat-more",onClick:c[1]||(c[1]=(...d)=>l.more&&l.more(...d))},"더 알아보기 >")])])):o("",!0),a.type===4?(e(),s("div",K,[n("div",Q,[n("div",X,r(a.chat.content),1),n("div",Z,r(t.$dayjs(a.chat.event_time).format("MM.DD ddd"))+"요일 ",1)]),n("button",{class:"button",onClick:c[2]||(c[2]=(...d)=>l.more&&l.more(...d))},"자세히 보기")])):o("",!0)])}const et=p(H,[["render",tt],["__scopeId","data-v-f296ff25"]]);const st={name:"Chat",components:{InfiniteLoading:T,ChatBox:y,ChatResult:y},setup(){},data(){return{isInitialized:!1}},computed:{...B(v,["list","chatList","totalCounts","pageNo","reload"])},watch:{list(){this.listToChatList()},reload(){if(this.reload){const t=this.$refs.scrollable,c=t.scrollHeight;t.scrollTo({top:c,behavior:"smooth"}),t.addEventListener("scroll",()=>{t.scrollTop+t.clientHeight>=c-.5&&this.setReload(!1)})}}},mounted(){if(!window.localStorage.getItem("accessToken")){this.$eventBus.$emit("onLoginModal");return}this.getFirstPage()},methods:{...S(v,["getList","listToChatList","getFirstPage","setIsFirstPage","setReload"]),async loadMore(){this.$nextTick(),setTimeout(()=>{this.totalCounts>this.list.length&&this.getList()},1e3)}}},at={class:"contents",ref:"scrollable"};function nt(t,c,a,u,k,l){var f;const d=g("infinite-loading"),h=y,x=et;return e(),s("div",at,[(f=t.chatList)!=null&&f.length?(e(),_(d,{key:0,"first-load":!1,distance:1e3,top:!0,onInfinite:l.loadMore},null,8,["onInfinite"])):o("",!0),(e(!0),s(w,null,M(t.chatList,i=>(e(),s("div",{key:i.id},[i.content_type===5?(e(),_(h,{key:0,type:"docent"})):o("",!0),i.content_type===7?(e(),_(h,{key:1,type:"loading"})):o("",!0),i.content_type===6?(e(),_(h,{key:2,text:i.content,type:"date"},null,8,["text"])):o("",!0),i.is_chatbot&&[1,2,3,4].includes(i.content_type)?(e(),_(x,{key:3,type:i.content_type,chat:i},null,8,["type","chat"])):o("",!0),!i.is_chatbot&&[1,2,3,4,null].includes(i.content_type)?(e(),_(h,{key:4,text:i.content},null,8,["text"])):o("",!0)]))),128))],512)}const rt=p(st,[["render",nt],["__scopeId","data-v-95507045"]]);export{rt as default};
