import{_ as u,r as C,o as $,f as p,k as l,l as h,m as _,t as k,E as y,q as d,A as x,B as I,H as v,D as g,L as w,Z as S,F as V,N as F}from"./entry.c61ee406.js";import{u as N}from"./generate.9f8bb2b6.js";import{u as f}from"./chat.04fdd157.js";const G={class:"chat-voice"},B={__name:"ChatVoice",emits:["finish"],setup(i,{emit:e}){const n=C(""),c=window.SpeechRecognition||window.webkitSpeechRecognition,t=new c;t.lang="ko",t.continuous=!0,t.onresult=s=>{for(let o=s.resultIndex,a=s.results.length;o<a;o++){let m=s.results[o][0].transcript;s.results[o].isFinal&&(n.value+=m,console.log("🎤 ",m))}},$(()=>{t.start()});function r(){t&&t.stop(),e("finish",n.value)}return(s,o)=>{const a=p("v-icon");return l(),h("div",G,[_("div",null,k(y(n)),1),d(a,{class:"ic_voice big",onClick:r})])}}},D=u(B,[["__scopeId","data-v-37149285"]]);const E={name:"ChatInput",data(){return{mode:"INPUT",data:"",isGenerating:!1}},setup(){},computed:{...x(f,["chatList"])},methods:{...I(f,["setChatList","getFirstPage","setReload"]),async send(){if(!this.data||this.data===""){alert("내용을 입력해 주세요.");return}if(this.isGenerating)return;const{generateChat:i}=N(),e=this.chatList;e.push({content_type:7}),this.setChatList(e),this.isGenerating=!0;const n=await i(this.data);if(console.log("✨generateChat >>> ",this.data),!n.success){const c=`${n.status_code}  - ${n.message}`;console.log("Error! > ",c,n),alert(c)}this.data="",this.getFirstPage(),this.isGenerating=!1},setData(i){this.data=i,this.mode="INPUT"}}},L={class:"chat-input"},P={class:"input"},b=["disabled"];function R(i,e,n,c,t,r){const s=p("v-icon"),o=D;return l(),h(V,null,[_("div",L,[t.mode==="INPUT"?(l(),v(s,{key:0,class:"ic_voice",onClick:e[0]||(e[0]=a=>t.mode="VOICE")})):g("",!0),_("div",P,[w(_("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>t.data=a),placeholder:"도슨트에게 당신의 이야기를 들려주세요",disabled:t.isGenerating},null,8,b),[[S,t.data]]),d(s,{class:"ic_send",onClick:r.send},null,8,["onClick"])])]),t.mode==="VOICE"?(l(),v(o,{key:0,onFinish:r.setData},null,8,["onFinish"])):g("",!0)],64)}const T=u(E,[["render",R],["__scopeId","data-v-694c992e"]]);const U={mounted(){}},A={class:"viewport"},M={class:"header"},O={class:"layout"};function q(i,e,n,c,t,r){const s=p("v-icon"),o=T;return l(),h("div",A,[_("div",M,[d(s,{class:"ic_home",onClick:e[0]||(e[0]=a=>this.$router.push("/home"))}),d(s,{class:"logo_docent"})]),_("div",O,[F(i.$slots,"default",{},void 0,!0)]),d(o)])}const z=u(U,[["render",q],["__scopeId","data-v-c9e7c449"]]);export{z as default};
