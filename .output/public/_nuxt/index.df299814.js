import{_ as l,k as o,l as i,m as a,t as p,f as y,G as g,E as u,F as f,x as N,y as B,Q as I,B as M,C as x,D as G,q as D,z as Y}from"./entry.43156d6c.js";import{u as w}from"./diary.54646c97.js";import{W as T}from"./v3-infinite-loading.es.7a0235a7.js";import"./axios.92690a64.js";const q={name:"ListDiary",props:{diary:{type:Object,required:!0,default:()=>{}}},methods:{showDetail(){console.log("cliclk>>",this.diary),console.log(`type: ${this.diary.content_type} id: ${this.diary.id}`),this.$router.push(`/diary/${this.diary.id}?type=${this.diary.content_type}`)}}},S=["src"],j={class:"diary_text"},A={class:"diary_title"},O={class:"diary_date"},E={key:0,class:"dot"},V={key:1,class:"dot green"};function z(e,s,t,c,m,n){return o(),i("div",{class:"item_diary",onClick:s[0]||(s[0]=(...r)=>n.showDetail&&n.showDetail(...r))},[a("img",{src:t.diary.image_url},null,8,S),a("div",j,[a("div",A,p(t.diary.diary_name),1),a("div",O,p(e.$dayjs(t.diary.create_date).format("YYYY.MM.DD")),1)]),t.diary.content_type===1?(o(),i("div",E)):(o(),i("div",V))])}const L=l(q,[["render",z],["__scopeId","data-v-26e04367"]]);const F={name:"ListDiary",props:{memo:{type:Object,required:!0,default:()=>{}}}},Q={class:"item_memo"},W={class:"memo_text"},H={class:"memo_title"},J={class:"memo_date"};function K(e,s,t,c,m,n){return o(),i("div",Q,[a("div",W,[a("div",H,p(t.memo.title),1),a("div",J,p(e.$dayjs(t.memo.create_date).format("YYYY.MM.DD")),1)])])}const k=l(F,[["render",K],["__scopeId","data-v-0fbbe779"]]),P={name:"ListItems",components:{ListDiary:L,ListMemo:k},props:{list:{type:Array,required:!0,default:[]}}},R=a("hr",null,null,-1);function U(e,s,t,c,m,n){const r=y("ListMemo"),_=y("ListDiary");return o(!0),i(f,null,g(t.list,(d,h)=>(o(),i("div",{key:h},[d.content_type===3?(o(),u(r,{key:0,memo:d},null,8,["memo"])):(o(),u(_,{key:1,diary:d},null,8,["diary"])),R]))),128)}const X=l(P,[["render",U]]);const Z={name:"BoardMemo",props:{memo:{type:Object,required:!0,default:()=>{}}}},tt=e=>(N("data-v-bf9d473b"),e=e(),B(),e),et={class:"item_board_memo"},st={class:"memo_text"},ot={class:"memo_date"},at={class:"memo_title"},it=tt(()=>a("div",{class:"memo_more"},"더 알아보기 >",-1));function nt(e,s,t,c,m,n){return o(),i("div",et,[a("div",st,[a("div",ot,p(e.$dayjs(t.memo.create_date).format("YYYY.MM.DD")),1),a("div",at,p(t.memo.title),1),it])])}const rt=l(Z,[["render",nt],["__scopeId","data-v-bf9d473b"]]);const dt={name:"BoardDiary",props:{diary:{type:Object,required:!0,default:()=>{}}},methods:{showDetail(){console.log("cliclk>>",this.diary),console.log(`type: ${this.diary.content_type} id: ${this.diary.id}`),this.$router.push(`/diary/${this.diary.id}?type=${this.diary.content_type}`)}}},ct=["src"];function _t(e,s,t,c,m,n){return o(),i("div",{class:"item_board_diary",onClick:s[0]||(s[0]=(...r)=>n.showDetail&&n.showDetail(...r))},[a("img",{src:t.diary.image_url},null,8,ct)])}const lt=l(dt,[["render",_t],["__scopeId","data-v-687f6b6b"]]);const mt={name:"BoardItems",components:{BoardMemo:rt,BoardDiary:lt},props:{list:{type:Array,required:!0,default:[]}}},yt={class:"board-items"};function ut(e,s,t,c,m,n){const r=y("BoardMemo"),_=y("BoardDiary");return o(),i("div",yt,[(o(!0),i(f,null,g(t.list,(d,h)=>(o(),i("div",{key:h,class:"item"},[d.content_type===3?(o(),u(r,{key:0,memo:d},null,8,["memo"])):(o(),u(_,{key:1,diary:d},null,8,["diary"]))]))),128))])}const pt=l(mt,[["render",ut],["__scopeId","data-v-5cf9610b"]]),b=I("gallery",{state:()=>({pageNo:1,type:0,totalCounts:0,mode:0,list:[],data:{}}),actions:{async getGalleryList(){const{getGalleryList:e}=w();console.log(`getGalleryList(${this.pageNo}/${this.type})`);const s=await e(this.type,this.pageNo);if(console.log(s),!s.success){const t=`${s.status_code}  - ${s.message}`;console.log("Error! > ",t,s),alert(t);return}this.data=s.data,this.pageNo+=1,this.computeTotalCounts(),this.dataToList()},dataToList(){let e=[];this.type===0?e=[...this.data.MorningDiary.map(t=>({...t,content_type:1})),...this.data.NightDiary.map(t=>({...t,content_type:2})),...this.data.Memo.map(t=>({...t,content_type:3}))]:this.type===1?e=[...this.data.MorningDiary.map(t=>({...t,content_type:1}))]:this.type===2?e=[...this.data.NightDiary.map(t=>({...t,content_type:2}))]:e=[...this.data.Memo.map(t=>({...t,content_type:3}))],e=[...e,...this.list];const s=e.sort((t,c)=>c.create_date.localeCompare(t.create_date));console.log(">> ",s),this.list=s},computeTotalCounts(){this.type===0?this.totalCounts=Number(this.data.Memo_count)+Number(this.data.MorningDiary_count)+Number(this.data.NightDiary_count):this.type===1?this.totalCounts=Number(this.data.MorningDiary_count):this.type===2?this.totalCounts=Number(this.data.NightDiary_count):this.totalCounts=Number(this.data.Memo_count)},setType(e){this.type=e},changeMode(){this.mode=(this.mode+1)%2},reset(){this.pageNo=1,this.totalCounts=0,this.list=[],this.data={}}}});const ht={props:{tags:{type:Array,required:!0},selected:{type:Number,required:!1,default:0}},data(){return{}},methods:{onClick(e){this.$emit("select",e)}}},ft={class:"tags"},gt=["onClick"];function $t(e,s,t,c,m,n){return o(),i("div",ft,[(o(!0),i(f,null,g(t.tags,(r,_)=>(o(),i("div",{class:M(["tag",{selected:_===t.selected}]),key:_,onClick:d=>n.onClick(_)},p(r),11,gt))),128))])}const vt=l(ht,[["render",$t],["__scopeId","data-v-dafd0930"]]);const Dt={name:"Gallery",setup(){},components:{ListDiary:L,ListMemo:k,InfiniteLoading:T,Tags:vt},data(){return{}},watch:{type(){console.log("New type -> ",this.type),this.reset(),this.getGalleryList()}},computed:{...x(b,["type","mode","list","totalCounts","data"])},async mounted(){await this.getGalleryList()},methods:{...G(b,["setType","changeMode","getGalleryList","reset"]),loadMore(){this.list.length<this.totalCounts&&this.getGalleryList()}}},bt={class:"header"},Mt={class:"contents"};function Lt(e,s,t,c,m,n){var $;const r=y("Tags"),_=y("v-icon"),d=X,h=pt,C=y("infinite-loading");return o(),i(f,null,[a("div",bt,[D(r,{tags:["ALL","Dream","Diary","Memo"],onSelect:s[0]||(s[0]=v=>e.setType(v)),selected:e.type},null,8,["selected"]),D(_,{class:M(e.mode===0?"ic_list":"ic_board"),onClick:s[1]||(s[1]=v=>e.changeMode())},null,8,["class"])]),a("div",Mt,[e.mode===0?(o(),u(d,{key:0,list:e.list},null,8,["list"])):(o(),u(h,{key:1,list:e.list},null,8,["list"])),($=e.list)!=null&&$.length?(o(),u(C,{key:2,"first-load":!1,distance:1e3,top:!0,onInfinite:n.loadMore},null,8,["onInfinite"])):Y("",!0)])],64)}const It=l(Dt,[["render",Lt],["__scopeId","data-v-f310e75a"]]);export{It as default};
