import{_ as u}from"./_plugin-vue_export-helper.c27b6911.js";import{r as C,o as k,f as p,k as r,l as h,m as l,t as $,A as x,q as d,J as y,K as I,L as v,z as f,F as w,U as S,M as V,H as F}from"./entry.fabf01e6.js";import{u as g,a as N}from"./chat.6a92b15f.js";import"./axios.f72bf569.js";const G={class:"chat-voice"},L={__name:"ChatVoice",emits:["finish"],setup(i,{emit:e}){const n=C(""),c=window.SpeechRecognition||window.webkitSpeechRecognition,t=new c;t.lang="ko",t.continuous=!0,t.onresult=s=>{for(let o=s.resultIndex,a=s.results.length;o<a;o++){let m=s.results[o][0].transcript;s.results[o].isFinal&&(n.value+=m,console.log("🎤 ",m))}},k(()=>{t.start()});function _(){t&&t.stop(),e("finish",n.value)}return(s,o)=>{const a=p("v-icon");return r(),h("div",G,[l("div",null,$(x(n)),1),d(a,{class:"ic_voice big",onClick:_})])}}},P=u(L,[["__scopeId","data-v-e5e9f806"]]);const U={name:"ChatInput",data(){return{mode:"INPUT",data:"",isGenerating:!1}},setup(){},computed:{...y(g,["chatList"])},methods:{...I(g,["setChatList","getFirstPage","setReload"]),async send(){if(this.isGenerating)return;const{generateChat:i}=N(),e=this.chatList;e.push({content_type:7}),this.setChatList(e),this.isGenerating=!0;const n=await i(this.data);if(console.log("✨generateChat >>> ",this.data),!n.success){const c=`${n.status_code}  - ${n.message}`;console.log("Error! > ",c,n),alert(c)}this.data="",this.getFirstPage(),this.isGenerating=!1},setData(i){this.data=i,this.mode="INPUT"}}},b={class:"chat-input"},B={class:"input"},D=["disabled"];function E(i,e,n,c,t,_){const s=p("v-icon"),o=P;return r(),h(V,null,[l("div",b,[t.mode==="INPUT"?(r(),v(s,{key:0,class:"ic_voice",onClick:e[0]||(e[0]=a=>t.mode="VOICE")})):f("",!0),l("div",B,[w(l("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>t.data=a),placeholder:"도슨트에게 당신의 이야기를 들려주세요",disabled:t.isGenerating},null,8,D),[[S,t.data]]),d(s,{class:"ic_send",onClick:_.send},null,8,["onClick"])])]),t.mode==="VOICE"?(r(),v(o,{key:0,onFinish:_.setData},null,8,["onFinish"])):f("",!0)],64)}const R=u(U,[["render",E],["__scopeId","data-v-d81895a8"]]);const T={mounted(){}},M={class:"viewport"},A={class:"header"};function O(i,e,n,c,t,_){const s=p("v-icon"),o=R;return r(),h("div",M,[l("div",A,[d(s,{class:"ic_home",onClick:e[0]||(e[0]=a=>this.$router.push("/home"))}),d(s,{class:"logo_docent"})]),F(i.$slots,"default",{},void 0,!0),d(o)])}const K=u(T,[["render",O],["__scopeId","data-v-861d4522"]]);export{K as default};
